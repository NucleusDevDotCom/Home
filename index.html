<!DOCTYPE html>
<html>
<head>
    <title>NucleusDev</title>
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            
        }
	.boxes:hover{
	    background-color:#EEEE;
	}
    </style>
    <script>
        document.addEventListener('readystatechange', event => { 
        if (event.target.readyState === "complete") {GetWeather();}});

        // Get Weather
      	async function GetWeather(){
           // lat/lon - Orlando
	   var lat = 'lat=28.5383';
           var lon = '&lon=-81.3792';
	   var exclude = '&exclude=hourly,daily';
           var api_key = '&appid=f11dd97f4628b430a08ec2c38546d542';
           var units = '&units=imperial'
           var api_url = 'https://api.openweathermap.org/data/2.5/weather?' + lat + lon + exclude + units + api_key;
           const response = await fetch(api_url);
           const data = await response.json();
	   var e = document.getElementById('WeatherPanel');
	   e.innerHTML = '      <div style="float:right;height:50px;width:75px;border:0px solid;text-align:right;margin-right:5px;">Weather </br>' + data.name + 
			 '</div><div style="float:right;height:50px;width:20px;border:0px solid;margin-top:13px;">&deg;F</div>' +
                         '      <div style="float:right;height:50px;width:50px;border:0px solid;margin-top:10px;font-size:20px;">' + data.main.temp + '</div>';
                         
	};

    </script>
</head>
<body>
    <div style="border:0px solid; height:75px;">
    <div id="WeatherPanel" style="display:inline-block; height:55px; width:155px;border:2px solid;border-radius:3px;float:right;background-color:#EEEE;"></div>
    <div style="margin-left:10px;width:182px;float:left; height:81px;border:0px solid;"><img src="Nucleus.png" alt="Nucleus Image"></div>
    <div style="width:100%;float:left; height:25px;border:0px solid;font-size:larger;">NucleusDev - Development Solutions </div>
    </div>
       
    <hr />
    <div style="overflow:auto;white-space:nowrap;width:100%;height:80px;border:0px solid;">
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Volatility</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Stocks</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Crypto</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Ebay</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Youtube</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Empty</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Empty</div>
	<div class="boxes" style="text-align:center;width:150px;height:55px;margin-left:5px;margin:0px;display:inline-block;border:1px solid;border-radius:5px;">Empty</div>
    </div>
    <div style="overflow:auto;white-space:nowrap;width:100%;height:535px;border:0px solid;border-radius:3px;">
	<div id='Panel' style="width:700px;height:500px;border:0px solid;border-radius:3px;"></div>
	
    </div>
    <script>
        
	var today = new Date();
        var dd = String(today.getDate()-1).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
 

	var ticker;
        var url;
	const time = "/range/1/day";
	const bDate = yyyy + '-' + mm + '-' + dd;
	const eDate =  yyyy + '-' + mm + '-' + dd;
        

	// Volatility  
        document.getElementsByClassName('boxes')[0]
                .addEventListener('click', function (event) {
	   GetVol();
        });
        // Stocks  
        document.getElementsByClassName('boxes')[1]
                .addEventListener('click', function (event) {
	   GetStock();
        });
       
        
	// Get Volatility
	async function GetVol(){
	   var ticker = "VXX";
           var api_url = 'https://api.polygon.io/v2/aggs/ticker/' + ticker + time + '/' + bDate + '/' + eDate + '?adjusted=true&sort=asc&limit=120&apiKey=gDSaldjr3rmQ7dyYOvFTNH_gZ36pNJhC';

           const response = await fetch(api_url);
           const data = await response.json();
	   var e = document.getElementById('Panel');
	   e.innerHTML = '<div style="border:1px solid; border-radius:3px;margin:7px;width:200px;padding:5px;>"' +
                         '<p><b>' + data.ticker + '</b><br>' +
                         'Date: ' + eDate + '<br>' +
                         'Close: ' + data.results[0].c + '<br>' + 
                         'Open: ' + data.results[0].o + '<br>' +
			 'High: ' + data.results[0].h + '<br>' +
                         'Low: ' + data.results[0].l + '<br></p></div>';
           e.style = 'margin:7px;';
	};

	// Get Stock
	async function GetStock(){
	   var ticker = "CHI";
           var api_url = 'https://api.polygon.io/v2/aggs/ticker/' + ticker + time + '/' + bDate + '/' + eDate + '?adjusted=true&sort=asc&limit=120&apiKey=gDSaldjr3rmQ7dyYOvFTNH_gZ36pNJhC';

           const response = await fetch(api_url);
           const data = await response.json();
	   var e = document.getElementById('Panel');
	   e.innerHTML = '<div style="border:1px solid; border-radius:3px;margin:7px;width:200px;padding:5px;>"' +
                         '<p><b>' + data.ticker + '</b><br>' +
                         'Date: ' + eDate + '<br>' +
                         'Close: ' + data.results[0].c + '<br>' + 
                         'Open: ' + data.results[0].o + '<br>' +
			 'High: ' + data.results[0].h + '<br>' +
                         'Low: ' + data.results[0].l + '<br></p></div>';
           e.style = 'margin:7px;';
	};

        

    </script>
</body>
</html>
  
