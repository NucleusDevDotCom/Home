<!DOCTYPE html>
<html>
<head>
    <title>NucleusDev</title>
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            
        }
	.boxes:hover{
	    background-color:#EEEE;
		
	}
	.boxes{
	    font-size:11px;
		text-align:center;
		width:79px;
		height:65px;
		margin:0px;
		margin-left:5px;
		margin-top:7px;
		
		display:inline-block;
		border:1px solid;
		border-radius:5px;
	}
    </style>
	<script src="weather.js"></script>
	<meta name="viewport" content= "width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
    	
	<div style="float:left; width:350px; height:120px; border:0px solid;">
		<div style="margin-left:10px;float:left;border:0px solid;"><img src="Nucleus.png" alt="Nucleus Image"></div>
		<div style="float:left;border:0px solid;font-size:larger;">Welcome to NucleusDev.com </div>
	</div>
	
	<div style="float:left; width:100%; height:1px; border-top:1px solid;margin-top:7px;margin-bottom:7px;border-color:#AAAA;"></div>
	
	<div style="float:left; width:100%; border:0px solid;">
		<div class="boxes" ><img src="Weather.PNG" alt="Weather"></div>
		<div class="boxes" ><img src="Volitility.PNG" alt="Volitility"></div>
		<div class="boxes" ><img src="Stocks2.PNG" alt="Stocks"></div>
		<div class="boxes" ><img src="YouTube.PNG" alt="YouTube"></div>
    </div>
    
	<div style="float:left; width:100%; height:1px; border-top:1px solid;margin-top:13px;margin-bottom:13px;border-color:#AAAA;"></div>
	
	<div id='Panel' style="float:left; display:inline-block; height:500px; width:100%;border:0px solid;border-radius:3px; margin-left:7px;"></div>
	
	<script>
        
	var today = new Date();
	var day = today.getDay();
	var offset = -1; // Only get Friday when it is Saturday, Sunday or Monday
	if (day === 0 ) {let offset = -2;}
	if (day === 1 ) {let offset = -3;}
	today.setDate(today.getDate() + offset);
	
	var dd = String(today.getDate()).padStart(2, '0');
    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
    var yyyy = today.getFullYear();
	
	var ticker;
        var url;
	const time = "/range/1/day";
	const bDate = yyyy + '-' + mm + '-' + dd;
	const eDate =  yyyy + '-' + mm + '-' + dd;
        
    // Weather
	document.getElementsByClassName('boxes')[0]
        .addEventListener('click', function (event) {
	    GetWeather();
        });
    
	// Volatility  
    document.getElementsByClassName('boxes')[1]
        .addEventListener('click', function (event) {
	    GetVol();
        });
		
    // Stocks  
    document.getElementsByClassName('boxes')[2]
        .addEventListener('click', function (event) {
	    GetStock();
        });
	
	// YouTube
	document.getElementsByClassName('boxes')[3]
        .addEventListener('click', function (event) {
	    GetYouTube();
        });
       
	    
	// Get Volatility
	async function GetVol(){
	   var ticker = "VXX";
           var api_url = 'https://api.polygon.io/v2/aggs/ticker/' + ticker + time + '/' + bDate + '/' + eDate + '?adjusted=true&sort=asc&limit=120&apiKey=gDSaldjr3rmQ7dyYOvFTNH_gZ36pNJhC';

           const response = await fetch(api_url);
           const data = await response.json();
	   var e = document.getElementById('Panel');
	   e.innerHTML = '<div style="border:1px solid; border-radius:3px;width:200px;padding:15px;">' + 
		              '<p><b>' + data.ticker + '</b><br>' +
                      'Date: ' + eDate + '<br>' +
                      'Close: ' + data.results[0].c + '<br>' + 
                      'Open: ' + data.results[0].o + '<br>' +
			          'High: ' + data.results[0].h + '<br>' +
                      'Low: ' + data.results[0].l + '<br>' +
					  '</p></div>';
	};

	// Get Stock   
	async function GetStock(){
	   var ticker = "CHI";
           var api_url = 'https://api.polygon.io/v2/aggs/ticker/' + ticker + time + '/' + bDate + '/' + eDate + '?adjusted=true&sort=asc&limit=120&apiKey=gDSaldjr3rmQ7dyYOvFTNH_gZ36pNJhC';

           const response = await fetch(api_url);
           const data = await response.json();
	   var e = document.getElementById('Panel');
	   
        e.innerHTML = '<div style="border:1px solid; border-radius:3px;width:200px;padding:15px;">' + 
		              '<p><b>' + data.ticker + '</b><br>' +
                      'Date: ' + eDate + '<br>' +
                      'Close: ' + data.results[0].c + '<br>' + 
                      'Open: ' + data.results[0].o + '<br>' +
			          'High: ' + data.results[0].h + '<br>' +
                      'Low: ' + data.results[0].l + '<br>' +
					  '</p></div>';
	};

	// Get Youtube
	async function GetYouTube(){
		var e = document.getElementById('Panel');
		
		e.innerHTML = '<div style="border:1px solid; border-radius:3px;width:225px;padding:15px;">' + 
		              '<a href="https://www.youtube.com/@NucleusDev" target="_blank">Youtube Channel - NucleusDev</a>' +
                      '</div><br/>';
		e.innerHTML = e.innerHTML + 
		              '<iframe width="787" height="443" src="https://www.youtube.com/embed/CwoIV5nc3qg" title="Fit Box to your Item Special Folding Tool" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>';
	}
        

    </script>
</body>
</html>
  
